<abp-page *abpPermission="'WorkShopManagement.Variants'">
  <app-topbar-layout titleKey="Menu:Variants" [(filters)]="filters" [list]="list" showBackButton (onBack)="goBack()">
    <div class="card">
      <div class="card-body">
        <ngx-datatable [rows]="carModels.items" [count]="carModels.totalCount" [list]="list" [columnMode]="'force'" default>
          <!-- Add CheckList button -->
          <ngx-datatable-column [sortable]="false" [canAutoResize]="false" [width]="50">
            <ng-template let-row="row" ngx-datatable-cell-template>
              <div ngbDropdown container="body" class="d-inline-block" *abpPermission="'WorkShopManagement.CheckLists'">
                <button class="ngx-actions-btn" data-toggle="dropdown" aria-haspopup="true" ngbDropdownToggle>
                  <i class="fa-solid fa-ellipsis-vertical"></i>
                </button>
                <div ngbDropdownMenu>
                  <button  ngbDropdownItem
                    (click)="addCheckList(row.id)">
                    {{ '::CheckList' | abpLocalization }}
                  </button>

                </div>
              </div>
            </ng-template>
          </ngx-datatable-column>
          <!-- Name -->
          <ngx-datatable-column [name]="'::Name' | abpLocalization" prop="name"></ngx-datatable-column>
           <ngx-datatable-column [name]="'::Image' | abpLocalization" [sortable]="false" [canAutoResize]="false" [width]="300">
            <ng-template let-row="row" ngx-datatable-cell-template>
              <div class="d-flex gap-2 flex-wrap">
                <ng-container>
                 <img
                  *ngIf="row?.fileAttachments?.path"
                  nz-image
                  width="105"
                  height="60"
                  [nzSrc]="normilzeUrl(row.fileAttachments.path)"
                  [alt]="row?.fileAttachments?.name || 'attachment'"
                  style="object-fit: cover; border-radius: 6px;"
                />
                </ng-container>
              </div>
            </ng-template>
          </ngx-datatable-column>
        </ngx-datatable>
      </div>
    </div>
  </app-topbar-layout>
</abp-page>