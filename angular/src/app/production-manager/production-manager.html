@if (useClassicView !== undefined) {
<abp-page *abpPermission="'WorkShopManagement.Stages'">
    @if(!useClassicView){
    <app-topbar-layout titleKey="Menu:ProductionManager" [(filters)]="filters" [list]="list">
        <div topbarActions>
            <app-production-topbar-actions></app-production-topbar-actions>
        </div>
        <nz-tabs [nzSelectedIndex]="selectedIndex" [nzDestroyInactiveTabPane]="true"
            (nzSelectedIndexChange)="onTabChange($event)" nzSize="large" style="margin-top: -15px;"
            [nzTabBarExtraContent]="extraTemplate">

            <nz-tab [nzTitle]="'::Enum:Stage.1' | abpLocalization" *abpPermission="'WorkShopManagement.Stages.Incoming'">
                <app-incoming [stages]="stages" [(filters)]="filters" [list]="list"></app-incoming>
            </nz-tab>

            <nz-tab [nzTitle]="'::Enum:Stage.2' | abpLocalization" *abpPermission="'WorkShopManagement.Stages.External'">
                <app-external-warehouse [stages]="stages" [(filters)]="filters" [list]="list"></app-external-warehouse>
            </nz-tab>

            <nz-tab [nzTitle]="'::Enum:Stage.3' | abpLocalization" *abpPermission="'WorkShopManagement.Stages.SCDWarehouse'">
                <app-scd-warehouse [stages]="stages" [(filters)]="filters" [list]="list"></app-scd-warehouse>
            </nz-tab>

            <nz-tab [nzTitle]="'::Enum:Stage.4' | abpLocalization" *abpPermission="'WorkShopManagement.Stages.Production'">
            </nz-tab>

            <nz-tab [nzTitle]="'::Enum:Stage.5' | abpLocalization" *abpPermission="'WorkShopManagement.Stages.PostProduction'">
                <app-post-production [stages]="stages" [filters]="filters" [list]="list"></app-post-production >
            </nz-tab>

            <nz-tab [nzTitle]="'::Enum:Stage.6' | abpLocalization" *abpPermission="'WorkShopManagement.Stages.AwaitingTransport'">
                <app-awaiting-transport [stages]="stages" [(filters)]="filters" [list]="list"></app-awaiting-transport>
            </nz-tab>

            <nz-tab [nzTitle]="'::Enum:Stage.7' | abpLocalization" *abpPermission="'WorkShopManagement.Stages.Dispatched'">
                <app-dispatched [stages]="stages" [(filters)]="filters" [list]="list"></app-dispatched>
            </nz-tab>

            <ng-template #extraTemplate>
                <i class="far fa-question-circle fa-xl link text-info" (click)="helpMessage()"></i>
            </ng-template>
        </nz-tabs>

        @if (selectedIndex === 3) {
        <div class="card">
            <app-production [filters]="filters"></app-production>
        </div>
        }



    </app-topbar-layout>
    } @else {
    <app-classic-view></app-classic-view>
    }
</abp-page>
}