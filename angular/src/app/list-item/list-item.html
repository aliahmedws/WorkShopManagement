<div class="card mb-3">
    <div class="card-header d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center gap-2">
            <button type="button" class="btn btn-link p-0" (click)="goBack()">
                <i class="fa fa-arrow-left me-2"></i>
            </button>

            <h5 class="card-title m-0">
                {{ (isEditMode ? '::EditListItem' : '::NewListItem') | abpLocalization }}
            </h5>
        </div>

        <button *ngIf="isEditMode" type="button" class="btn btn-outline-secondary btn-sm" (click)="resetForm()">
            {{ '::Cancel' | abpLocalization }}
        </button>
    </div>

    <div class="card-body">
        <form [formGroup]="form" (ngSubmit)="save()">
            <div class="row g-3">

                <div class="col-12 col-md-4">
                    <label class="form-label">
                        {{ '::Name' | abpLocalization }} <span class="text-danger">*</span>
                    </label>
                    <input type="text" class="form-control" formControlName="name" />
                </div>

                <div class="col-12 col-md-2">
                    <label class="form-label">
                        {{ '::Position' | abpLocalization }} <span class="text-danger">*</span>
                    </label>
                    <input type="number" class="form-control" formControlName="position" min="0" />
                </div>

                <div class="col-12 col-md-3">
                    <label class="form-label">
                        {{ '::CommentType' | abpLocalization }} <span class="text-danger">*</span>
                    </label>
                    <select class="form-select" formControlName="commentType">
                        <option *ngFor="let o of commentTypes" [ngValue]="o.value">
                            {{ ('::Enum:CommentType.' + o.value) | abpLocalization }}
                        </option>
                    </select>
                </div>

                <div class="col-12 col-md-3">
                    <label class="form-label">
                        {{ '::CommentPlaceholder' | abpLocalization }}
                    </label>
                    <input type="text" class="form-control" formControlName="commentPlaceholder" />
                    <small class="text-muted">
                        {{ '::DefaultSameAsName' | abpLocalization }}
                    </small>
                </div>

                <div class="row g-3 align-items-end mt-2">
                    <!-- Is Separator -->
                    <div class="col-12 col-md-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" formControlName="isSeparator"
                                id="isSeparator" />
                            <label class="form-check-label" for="isSeparator">
                                {{ '::IsSeparator' | abpLocalization }}
                            </label>
                        </div>
                    </div>

                    <!-- Is Attachment Required -->
                    <div class="col-12 col-md-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" formControlName="isAttachmentRequired"
                                id="isAttachmentRequired" [disabled]="form.get('isSeparator')?.value" />
                            <label class="form-check-label" for="isAttachmentRequired">
                                {{ '::IsAttachmentRequired' | abpLocalization }}
                            </label>
                        </div>
                    </div>

                    <!-- Save Button -->
                    <div class="col-12 col-md-6 d-flex justify-content-end">
                        <button class="btn btn-primary" type="submit" [disabled]="form.invalid || !checkListId">
                            <i class="fa fa-check me-1"></i>
                            {{ (isEditMode ? '::Update' : '::Save') | abpLocalization }}
                        </button>
                    </div>
                </div>


            </div>
        </form>
    </div>
</div>

<!-- List Card -->
<div class="card">
    <div class="card-header d-flex align-items-center justify-content-between">
        <h5 class="card-title m-0">{{ '::Menu:ListItems' | abpLocalization }}</h5>

        <div class="text-muted small">
            <span>{{ '::CheckList' | abpLocalization }}:</span>
            <strong>{{ checkListName || '-' }}</strong>
        </div>
    </div>

    <div class="card-body">
        <ngx-datatable [rows]="listItems.items" [count]="listItems.totalCount" [list]="list" default>
            <!-- Actions -->
            <ngx-datatable-column [name]="'::Actions' | abpLocalization" [maxWidth]="150" [sortable]="false">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    <div ngbDropdown container="body" class="d-inline-block">
                        <button class="btn btn-primary btn-sm dropdown-toggle" ngbDropdownToggle>
                            <i class="fa fa-cog me-1"></i>{{ '::Actions' | abpLocalization }}
                        </button>

                        <div ngbDropdownMenu>
                            <button ngbDropdownItem (click)="edit(row.id)"
                                *abpPermission="'WorkShopManagement.ListItems.Edit'">
                                {{ '::Edit' | abpLocalization }}
                            </button>
                            <button ngbDropdownItem (click)="delete(row.id)"
                                *abpPermission="'WorkShopManagement.ListItems.Delete'">
                                {{ '::Delete' | abpLocalization }}
                            </button>
                        </div>
                    </div>
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column [name]="'::Position' | abpLocalization" prop="position"
                [maxWidth]="120"></ngx-datatable-column>

            <ngx-datatable-column [name]="'::Name' | abpLocalization" prop="name"></ngx-datatable-column>

            <ngx-datatable-column [name]="'::CommentType' | abpLocalization">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{ ('::Enum:CommentType.' + row.commentType) | abpLocalization }}
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column [name]="'::CommentPlaceholder' | abpLocalization"
                prop="commentPlaceholder"></ngx-datatable-column>

            <ngx-datatable-column [name]="'::IsSeparator' | abpLocalization" [maxWidth]="140">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{ row.isSeparator ? ('::Yes' | abpLocalization) : ('::No' | abpLocalization) }}
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column [name]="'::IsAttachmentRequired' | abpLocalization" [maxWidth]="200">
                <ng-template let-row="row" ngx-datatable-cell-template>
                    {{ row.isAttachmentRequired ? ('::Yes' | abpLocalization) : ('::No' | abpLocalization) }}
                </ng-template>
            </ngx-datatable-column>

        </ngx-datatable>
    </div>
</div>